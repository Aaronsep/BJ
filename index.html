<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Plan and balance daily jobs across teams with smart scheduling." />
  <meta name="theme-color" content="#eef3fb" />
  <title>Daily Work Planner</title>
  <script>
    (function() {
      try {
        var t = localStorage.getItem("ui-theme-v1");
        if (t !== "light" && t !== "dark") {
          t = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        }
        document.documentElement.setAttribute("data-theme", t);
      } catch (e) {}
    })();
  </script>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <button id="themeToggleBtn" class="themeToggleCircle" type="button" aria-label="Switch theme">
    <span id="themeToggleText" aria-hidden="true">‚óê</span>
  </button>

  <main class="wrap">
    <header class="top">
      <div>
        <h1>Daily Work Planner</h1>
        <div class="sub">
          Add jobs and get a balanced team plan in seconds.
          You can keep a job assigned to a specific team when needed.
        </div>
      </div>
    </header>

    <div class="grid">
      <section class="card" aria-labelledby="jobsCardTitle">
        <div class="card-h">
          <b id="jobsCardTitle">Jobs</b>
          <div class="footerBtns">
            <button id="addBtn" class="btn icon primary" type="button" title="Add job">+</button>
            <button id="demoBtn" class="btn" type="button">Sample</button>
            <button id="refreshDbBtn" class="btn" type="button">Refresh list</button>
            <button id="clearBtn" class="btn bad" type="button">Clear</button>
          </div>
        </div>
        <div class="card-b">
          <form id="addJobForm" class="controls" autocomplete="off">
            <div class="field fieldAuto" style="flex:1; min-width:260px;">
              <label for="nameIn">Address</label>
              <input
                id="nameIn"
                type="text"
                placeholder="Ex: 4567 Dynasty Road"
                autocomplete="off"
                autocapitalize="off"
                spellcheck="false"
                aria-autocomplete="list"
                aria-controls="nameSuggestions"
                aria-expanded="false"
              />
              <div id="nameSuggestions" class="suggestions hidden" role="listbox"></div>
            </div>
            <div class="field" style="min-width:190px;">
              <label for="durIn">Duration</label>
              <input id="durIn" type="text" placeholder="Ex: 1.5 or 2:25" inputmode="decimal" />
            </div>
            <div class="field" style="min-width:180px;">
              <label for="fixIn">Assigned team (optional)</label>
              <select id="fixIn"></select>
            </div>
            <div>
              <button id="addBtn2" class="btn primary" type="submit">Add</button>
            </div>
          </form>

          <div class="hint">
            Tip: use <code>1.5</code> for decimal hours, or <code>1:30</code> for hh:mm.
          </div>
          <div class="mini" id="dbInfo" role="status" aria-live="polite"></div>

          <div class="list" id="list"></div>
          <div class="mini" id="countInfo"></div>

          <div class="errBox" id="errBox" role="alert" aria-live="assertive"></div>
        </div>
      </section>

      <section class="card" aria-labelledby="planCardTitle">
        <div class="card-h">
          <b id="planCardTitle">Plan</b>
          <div class="footerBtns">
            <button id="solveBtn" class="btn good" type="button">Create plan</button>
            <button id="copyBtn" class="btn" type="button">Copy plan</button>
          </div>
        </div>
        <div class="card-b">
          <div class="controls">
            <div class="field">
              <label for="k">Teams</label>
              <input id="k" type="number" min="1" value="2" />
            </div>
            <div class="field">
              <label for="quant">Rounding (minutes)</label>
              <input id="quant" type="number" min="1" value="1" />
            </div>
          </div>
          <div class="controls historyControls">
            <div class="field" style="flex:1; min-width:260px;">
              <label for="historySelect">Recent checks (3 days)</label>
              <select id="historySelect"></select>
            </div>
            <div class="footerBtns">
              <button id="loadHistoryBtn" class="btn" type="button">Open</button>
              <button id="deleteHistoryBtn" class="btn bad" type="button">Delete</button>
            </div>
          </div>
          <div class="historyMeta">
            <div class="mini" id="historyInfo"></div>
            <button id="clearHistoryBtn" class="btn btnText dangerText" type="button">Clear all</button>
          </div>

          <div class="status" id="status" role="status" aria-live="polite"></div>
          <pre id="out"></pre>
        </div>
      </section>
    </div>
  </main>

  <div id="confirmModal" class="modalOverlay" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="confirmTitle" aria-describedby="confirmMessage">
      <h2 id="confirmTitle" class="modalTitle">Confirm action</h2>
      <p id="confirmMessage" class="modalMessage"></p>
      <div class="modalActions">
        <button id="confirmCancelBtn" class="btn" type="button">Cancel</button>
        <button id="confirmOkBtn" class="btn bad" type="button">Delete</button>
      </div>
    </div>
  </div>

<script type="module" src="./script.js"></script>
</body>
</html>
